const { NormalObstacle, BouncyObstacle,
	CircularNormalObstacle, CircularBouncyObstacle,
	Lava, RotatingLava, SpeedObstacle, GravObstacle,
	Tp, MovingObstacle, StoryDisplay, Pusher, MovingLavaObstacle, Portal, Winpad, Booster, WallBooster, WB, SpeedTrap, GrowingObstacle, GrowingLavaObstacle, GrowingCircleObstacle, GrowingCircleLavaObstacle, SizePlayer, Slip, BoostPad, Tornado, SnapGrid, VinetteIncrease, ColorChange, Checkpoint, InvincibilityPowerup, Particles, Ship, CoinDoor, PlatformerGrav, Coin, BreakableObstacle, DrawingCanvas }= require("./!conversionClasses.js");
const Spawner = require('../spawner.js');
const Safe = require('../safe.js');
const Text = require('../text.js');
const parseAddedObs = require('../addedobsparser.js');

const minigames = {
  arena: { width: 4000, height: 4000 },
  enemy: [],
  safes: [],
  texts: [],
  obstacles: [],
  spawns: [],
  playerSpawn: {x: 2000, y: 2000 },
  name: 'Minigames',
  longName: 'Minigames',
  bgColor: '#1f2229',
    tileColor: '#323645',
  difficulty: "Peaceful",
  addedObstacles: [{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp"},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp"},{"x":2750,"y":1750,"w":750,"h":150,"type":"normal"}]
}

let { texts, obstacles, safes, spawns, playerSpawn, arena } = minigames;

// add particles in parser someday D:

// old minigames before zerotix racing
// eval(parseAddedObs('[{"x":2025,"y":650,"w":150,"h":50,"type":"bounce","effect":50},{"x":2075,"y":450,"w":175,"h":50,"type":"bounce","effect":50},{"x":2025,"y":0,"w":225,"h":300,"type":"tornado","spinRadius":5},{"x":2450,"y":200,"w":50,"h":50,"type":"circle-normal","radius":120},{"x":2800,"y":0,"w":25,"h":25,"type":"circle-normal","radius":120},{"x":3150,"y":200,"w":25,"h":25,"type":"circle-bounce","radius":120,"effect":30},{"x":3550,"y":25,"w":25,"h":25,"type":"circle-bounce","radius":90,"effect":30},{"x":3700,"y":300,"w":25,"h":25,"type":"circle-bounce","radius":140,"effect":30},{"x":4000,"y":300,"w":25,"h":25,"type":"circle-bounce","radius":80,"effect":30},{"x":0,"y":1975,"w":1900,"h":50,"type":"normal"},{"x":1975,"y":0,"w":50,"h":1900,"type":"normal"},{"x":2100,"y":1975,"w":1900,"h":50,"type":"normal"},{"x":1975,"y":2100,"w":50,"h":1900,"type":"normal"},{"x":0,"y":1000,"w":1000,"h":50,"type":"normal"},{"x":1000,"y":0,"w":50,"h":1050,"type":"normal"},{"x":0,"y":1050,"w":1850,"h":925,"type":"normal"},{"x":1850,"y":0,"w":125,"h":1850,"type":"normal"},{"x":1050,"y":0,"w":800,"h":1050,"type":"normal"},{"x":2025,"y":1750,"w":225,"h":50,"type":"ship","state":true},{"x":2200,"y":1750,"w":50,"h":225,"type":"ship","state":true},{"x":2025,"y":1850,"w":125,"h":50,"type":"ship","state":false},{"x":2100,"y":1850,"w":50,"h":125,"type":"ship","state":false},{"x":2000,"y":2000,"w":0,"h":0,"type":"ship","state":false},{"x":3950,"y":1875,"w":50,"h":50,"type":"coindoor","coins":3,"currentCoins":3},{"x":2250,"y":200,"w":1450,"h":1550,"type":"normal"},{"x":3900,"y":1875,"w":50,"h":100,"type":"normal"},{"x":3700,"y":1600,"w":300,"h":150,"type":"platformer","force":3000,"dir":{"x":0,"y":3000},"direction":"down","jumpHeight":0},{"x":3725,"y":1650,"w":50,"h":50,"type":"coin","collected":false},{"x":3825,"y":1650,"w":50,"h":50,"type":"coin","collected":false},{"x":3925,"y":1650,"w":50,"h":50,"type":"coin","collected":false},{"x":3700,"y":1650,"w":25,"h":50,"type":"normal"},{"x":3775,"y":1650,"w":50,"h":50,"type":"normal"},{"x":3875,"y":1650,"w":50,"h":50,"type":"normal"},{"x":3975,"y":1650,"w":25,"h":50,"type":"normal"},{"x":2250,"y":1750,"w":450,"h":225,"type":"grav","force":5000,"dir":{"x":-5000,"y":0},"direction":"left"},{"x":2025,"y":1500,"w":200,"h":250,"type":"grav","force":2000,"dir":{"x":-2000,"y":0},"direction":"left"},{"x":2050,"y":1200,"w":200,"h":300,"type":"grav","force":2000,"dir":{"x":2000,"y":0},"direction":"right"},{"x":2225,"y":1500,"w":25,"h":250,"type":"normal"},{"x":2025,"y":1200,"w":25,"h":300,"type":"normal"},{"x":2025,"y":850,"w":225,"h":350,"type":"grav","force":2000,"dir":{"x":0,"y":-2000},"direction":"up"},{"x":3700,"y":450,"w":300,"h":600,"type":"speed","speedInc":1.5},{"x":3700,"y":1225,"w":25,"h":25,"type":"circle-normal","radius":100},{"x":4000,"y":1225,"w":50,"h":25,"type":"circle-normal","radius":100},{"x":2700,"y":1750,"w":50,"h":175,"type":"normal"},{"x":3650,"y":1825,"w":50,"h":150,"type":"normal"},{"x":0,"y":3100,"w":1600,"h":50,"type":"normal"},{"x":1550,"y":3150,"w":50,"h":850,"type":"normal"},{"x":1650,"y":2150,"w":325,"h":1850,"type":"normal"},{"x":0,"y":2025,"w":1650,"h":1075,"type":"normal"},{"x":1600,"y":3100,"w":50,"h":900,"type":"normal"},{"x":1850,"y":2025,"w":50,"h":125,"type":"tp","tpx":775,"tpy":3550},{"x":1900,"y":2100,"w":75,"h":50,"type":"tp","tpx":775,"tpy":3550},{"x":1650,"y":2025,"w":200,"h":125,"type":"normal"},{"x":150,"y":3300,"w":1250,"h":550,"type":"speed","speedInc":1.5},{"x":0,"y":3850,"w":1550,"h":150,"type":"grav","force":1500,"dir":{"x":0,"y":-1500},"direction":"up"},{"x":0,"y":3150,"w":1550,"h":150,"type":"grav","force":1500,"dir":{"x":0,"y":1500},"direction":"down"},{"x":0,"y":3150,"w":150,"h":850,"type":"grav","force":1500,"dir":{"x":1500,"y":0},"direction":"right"},{"x":1400,"y":3150,"w":150,"h":850,"type":"grav","force":1500,"dir":{"x":-1500,"y":0},"direction":"left"},{"x":2025,"y":3225,"w":1975,"h":775,"type":"normal"},{"x":3225,"y":2000,"w":775,"h":1225,"type":"normal"},{"x":2025,"y":2100,"w":125,"h":50,"type":"breakable","maxStrength":10,"currentStrength":10,"time":0,"timer":0.1,"regenTime":5,"healTimer":0},{"x":2100,"y":2025,"w":50,"h":125,"type":"breakable","maxStrength":10,"currentStrength":10,"time":0,"timer":0.1,"regenTime":5,"healTimer":0},{"x":2025,"y":2150,"w":125,"h":1075,"type":"normal"},{"x":3500,"y":1750,"w":25,"h":125,"type":"normal"},{"x":3525,"y":1750,"w":25,"h":100,"type":"normal"},{"x":3550,"y":1750,"w":25,"h":75,"type":"normal"},{"x":3575,"y":1750,"w":25,"h":50,"type":"normal"},{"x":3600,"y":1750,"w":25,"h":25,"type":"normal"},{"x":3625,"y":1875,"w":25,"h":100,"type":"normal"},{"x":3600,"y":1900,"w":25,"h":75,"type":"normal"},{"x":3575,"y":1925,"w":25,"h":50,"type":"normal"},{"x":3550,"y":1950,"w":25,"h":25,"type":"normal"}]'));

// new minigames with zerotix racing
eval(parseAddedObs(`[{"x":1975,"y":2100,"w":50,"h":1900,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":0,"y":1000,"w":1000,"h":50,"type":"normal","canJump":true,"enemyChildId":null,"inView":false},{"x":1000,"y":0,"w":50,"h":1050,"type":"normal","canJump":true,"enemyChildId":null,"inView":false},{"x":0,"y":1050,"w":1850,"h":925,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1850,"y":0,"w":125,"h":1850,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1050,"y":0,"w":800,"h":1050,"type":"normal","canJump":true,"enemyChildId":null,"inView":false},{"x":2000,"y":2000,"w":0,"h":0,"type":"ship","state":false,"shipAngle":1.5707963267948966,"enemyChildId":null,"inView":true},{"x":0,"y":3100,"w":1600,"h":50,"type":"normal","canJump":true,"enemyChildId":null,"inView":false},{"x":1550,"y":3150,"w":50,"h":850,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1650,"y":2150,"w":325,"h":1850,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":0,"y":2025,"w":1650,"h":1075,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1600,"y":3100,"w":50,"h":900,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1850,"y":2025,"w":50,"h":125,"type":"tp","tpx":775,"tpy":3550,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":2100,"w":75,"h":50,"type":"tp","tpx":775,"tpy":3550,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1650,"y":2025,"w":200,"h":125,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":150,"y":3300,"w":1250,"h":550,"type":"speed","speedInc":1.5,"enemyChildId":null,"inView":false},{"x":0,"y":3850,"w":1550,"h":150,"type":"grav","force":1500,"dir":{"x":0,"y":-1500},"direction":"up","enemyChildId":null,"inView":false},{"x":0,"y":3150,"w":1550,"h":150,"type":"grav","force":1500,"dir":{"x":0,"y":1500},"direction":"down","enemyChildId":null,"inView":false},{"x":0,"y":3150,"w":150,"h":850,"type":"grav","force":1500,"dir":{"x":1500,"y":0},"direction":"right","enemyChildId":null,"inView":false},{"x":1400,"y":3150,"w":150,"h":850,"type":"grav","force":1500,"dir":{"x":-1500,"y":0},"direction":"left","enemyChildId":null,"inView":true},{"x":2025,"y":2100,"w":125,"h":50,"type":"breakable","maxStrength":10,"currentStrength":10,"time":0.08333333333333343,"timer":0.1,"regenTime":5,"enemyChildId":null,"inView":true,"healTimer":0},{"x":2100,"y":2025,"w":50,"h":125,"type":"breakable","maxStrength":10,"currentStrength":10,"time":0.09166666666666695,"timer":0.1,"regenTime":5,"enemyChildId":null,"inView":true,"healTimer":0},{"x":2025,"y":2150,"w":125,"h":1075,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":0,"y":1975,"w":1900,"h":50,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1975,"y":1850,"w":50,"h":50,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":2100,"y":1975,"w":1125,"h":50,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":3225,"y":1975,"w":775,"h":25,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1975,"y":0,"w":875,"h":1850,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":2150,"y":1850,"w":1800,"h":125,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":3350,"y":0,"w":50,"h":825,"type":"normal","canJump":true,"enemyChildId":null,"inView":false},{"x":3400,"y":600,"w":600,"h":1375,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":2850,"y":0,"w":550,"h":1850,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":2750,"y":1750,"w":750,"h":150,"type":"normal","canJump":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":3400,"y":0,"w":600,"h":600,"type":"ship","state":true,"shipAngle":1.5707963267948966,"enemyChildId":null,"inView":false},{"x":2025,"y":1850,"w":125,"h":50,"type":"tp","tpx":3700,"tpy":300,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":2100,"y":1900,"w":50,"h":75,"type":"tp","tpx":3700,"tpy":300,"bgColor":null,"tileColor":null,"changeColor":true,"enemyChildId":null,"inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":2750,"y":1750,"w":750,"h":150,"type":"normal","inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":1850,"y":1850,"w":50,"h":125,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":1900,"y":1850,"w":75,"h":50,"type":"tp","tpx":500,"tpy":500,"id":"duelsTp","inView":true},{"x":2000,"y":3200,"w":150,"h":850,"type":"normal","inView":true},{"x":2025,"y":3525,"w":1975,"h":500,"type":"normal","inView":false},{"x":3650,"y":1775,"w":400,"h":2250,"type":"normal","inView":false},{"x":3150,"y":1900,"w":525,"h":125,"type":"normal","inView":true}]`))

// ideas:

// randomly generated corridor that gets harder and harder :D
// reaction time test
// precision test
// volleyball
// map rush (by zerotix): basically u do all the maps in the universe from easiest to hardest in 1 try :)
// soccer with assigned teams

// done ideas:

// duels: done
// tag: done
// racing: done
// duel with waves of obstacles/ enemies (mainly obstacles) like elude: WIP; to add: a start tp position for all waves so that u dont have stuff spawn on top of u ;-;
safes.push(new Safe(1900,1900,200,200));
texts.push(new Text(1915, 1875, 'Duels!'));
texts.push(new Text(2085, 1875, 'Racing!'));
texts.push(new Text(1915, 2125, 'Tag!'));
texts.push(new Text(2085, 2125, 'Space To Draw!'));

obstacles.push(new DrawingCanvas(2150,2025,1500,1500));


texts.push(new Text(3700, 650, " {window.mg1countdownStart ? Math.round(mg1countTimer) + 's': 'Waiting for more players to join...'} "))// hm
//texts.push(new Text(750, -40, "Your Strokes: {me().strokes}"));// maybe try this idk

// obstacles.push(new Portal(3950, 1925, 50, "Planet of Speedy Racing", "PoSR", "Moderate", 0, "/sounds/Wavetable.mp3"));
//spawns.push(new Spawner(2750, 1750, 900, 225, { type: 'growing', amount: 5, radius: 1, speed: 120, growSpeed: 20, growing: true, minRadius: 1, maxRadius: 30, bounceAmount: 40 }));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,0,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,-100,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,-200,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,-300,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,100,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,200,0));
// obstacles.push(new Particles(2700, 1925, 800, 50,0.012,2,3,'white',0.4,true,300,0));

module.exports = minigames;